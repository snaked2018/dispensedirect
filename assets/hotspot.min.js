/**
 *  @class
 *  @function HotspotSlideshow
 */
if (!customElements.get('hotspot-slideshow')) {
  class HotspotSlideshow extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback() {
      this.hotspots = this.querySelectorAll('.thb-hotspot');
      this.target = this.querySelector('slide-show');
      this.flkty = Flickity.data(this.target);

      this.hotspots.forEach((hotspot, i) => {
        hotspot.addEventListener('click', this.onClick.bind(this, i, hotspot));
        hotspot.addEventListener('touchstart', this.onClick.bind(this, i, hotspot));
      });
    }

    onClick(i, hotspot) {
      [].forEach.call(this.hotspots, function (el) {
        el.classList.remove('active');
      });
      hotspot.classList.add('active');
      this.flkty.select(i);
    }
  }
  customElements.define('hotspot-slideshow', HotspotSlideshow);
}
