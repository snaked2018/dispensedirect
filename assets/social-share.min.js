/**
 *  @class
 *  @function SocialShare
 */
if (!customElements.get('social-share')) {
  class SocialShare extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback() {
      this.links = this.querySelectorAll('.social');
      this.icons = this.querySelector('.icons');
      this.tl = gsap.timeline({
        paused: true,
        onStart: () => {
          this.icons.style.display = 'block';
        },
        onReverseComplete: () => {
          this.icons.style.display = 'none';
        }
      });
      this.tl
        .fromTo(this.icons, {
          y: '6',
          x: '-50%',
          autoAlpha: 0
        }, {
          duration: 0.25,
          y: '-2',
          x: '-50%',
          autoAlpha: 1
        });
      this.setupEventListeners();
    }

    setupEventListeners() {
      this.links.forEach((link) => {
        link.addEventListener('click', (event) => {
          let left = (screen.width / 2) - (640 / 2),
            top = (screen.height / 2) - (440 / 2) - 100;
          window.open(link.getAttribute('href'), 'mywin', 'left=' + left + ',top=' + top + ',width=640,height=440,toolbar=0');
          event.preventDefault();
        });
      });

      this.addEventListener('mouseenter', this.hoverOn.bind(this));
      this.addEventListener('mouseleave', this.hoverOff.bind(this));

    }
    hoverOn() {
      this.tl.timeScale(1).play();
    }
    hoverOff() {
      this.tl.timeScale(1.5).reverse();
    }
  }
  customElements.define('social-share', SocialShare);
}