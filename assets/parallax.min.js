/**
 *  @class
 *  @function ParallaxImage
 */
if (typeof ParallaxImage == 'undefined') {
  class ParallaxImage {
    constructor() {
      this.images = document.querySelectorAll('.thb-parallax');
      this.property = (gsap.getProperty('html', '--header-height') + gsap.getProperty('html', '--announcement-height')) + 'px';

      if (this.images.length) {
        this.setupEventListeners();
      }
    }
    setupEventListeners() {
      this.images.forEach((image, i) => {
        gsap.fromTo(image.querySelector('.thb-parallax-image'), {
          y: '-8%'
        }, {
          y: '8%',
          ease: 'none',
          scrollTrigger: {
            trigger: image,
            scrub: 1,
            start: () => `top bottom`,
            end: () => `bottom top-=${this.property}`,
            onUpdate: () => {
              this.property = (gsap.getProperty('html', '--header-height') + gsap.getProperty('html', '--announcement-height')) + 'px';
            }
          }
        });
      });
    }
  }
  new ParallaxImage();
}