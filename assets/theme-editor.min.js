window.addEventListener('load', () => {

  document.addEventListener('shopify:section:load', function (event) {
    const section = event.target;
    if (section.querySelectorAll('.animation')) {
      if (typeof ScrollAnimation !== 'undefined') {
        new ScrollAnimation();
      }
    }
    if (section.querySelectorAll('img.retina_size:not(.retina_active)')) {
      if (typeof RetinaJS !== 'undefined') {
        new RetinaJS();
      }
    }
    if (section.querySelector('.carousel')) {
      setTimeout(() => {
        window.dispatchEvent(new Event('resize'));
      }, 150);
    }
  });
});