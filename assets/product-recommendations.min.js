/**
 *  @class
 *  @function ProductRecommendations
 */
class ProductRecommendations extends HTMLElement {
  constructor() {
    super();

  }
  fetchProducts() {
    fetch(this.dataset.url)
      .then(response => response.text())
      .then(text => {
        const new_html = document.createElement('div');
        new_html.innerHTML = text;
        const new_recommendations = new_html.querySelector('product-recommendations');

        if (new_recommendations && new_recommendations.innerHTML.trim().length) {
          this.innerHTML = new_recommendations.innerHTML;
        }

        this.classList.add('product-recommendations--loaded');
      })
      .catch(e => {
        console.error(e);
      });
  }
  connectedCallback() {
    this.fetchProducts();
  }
}

customElements.define('product-recommendations', ProductRecommendations);